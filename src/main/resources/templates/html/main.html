<!-- home.html - Protein Tracker 메인 화면 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>오늘의 프로틴 | Protein Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Pretendard", sans-serif;
        }
        /* 예쁜 스크롤바 스타일 */
        .scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 10px;
        }
        .scrollbar-hidden::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hidden {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
<div class="bg-white w-full max-w-sm rounded-[40px] px-6 pt-10 pb-6 shadow-md relative flex flex-col" style="height: 700px;">
    <div class="overflow-y-auto pb-20 scrollbar scrollbar-hidden pl-2">
        <h2 class="text-blue-500 text-xl font-semibold mb-1">오늘의 프로틴</h2>
        <p class="text-lg font-bold text-black mb-6">2024.10.06</p>

        <!-- 섭취량 원형 시각화 -->
        <div class="flex flex-col items-center mb-6">
            <div class="relative w-40 h-40">
                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" stroke="#E5E7EB" stroke-width="10" fill="none" />
                    <circle
                            id="progressCircle"
                            cx="50" cy="50" r="45"
                            stroke="#60A5FA"
                            stroke-width="10"
                            fill="none"
                            stroke-linecap="round"
                            stroke-dasharray="282.6"
                            stroke-dashoffset="282.6"
                            style="transition: stroke-dashoffset 1s ease-out"
                    />
                </svg>
                <div class="absolute inset-0 flex flex-col items-center justify-center">
                    <p id="currentText" class="text-2xl font-bold text-blue-600">10g</p>
                    <p class="text-sm text-gray-400">/120g</p>
                </div>
            </div>
            <p id="remainText" class="text-sm text-gray-500 mt-2">110g 남았어요!</p>
        </div>

        <!-- 단백질 등록 -->
        <div class="mt-6">
            <h3 class="text-blue-500 font-semibold mb-2">프로틴 등록</h3>
            <form id="proteinForm" class="rounded-md border px-4 py-3 bg-gray-50">
                <div class="flex items-end gap-2">
                    <div class="flex-1">
                        <label for="name" class="block text-xs text-gray-500 mb-1">이름</label>
                        <input
                                type="text"
                                name="name"
                                id="name"
                                placeholder="예: 단백질 쉐이크"
                                required
                                class="w-full px-3 py-1.5 border border-gray-300 rounded-md text-sm"
                        />
                    </div>
                    <div class="w-24">
                        <label for="amount" class="block text-xs text-gray-500 mb-1">섭취량 (g)</label>
                        <input
                                type="number"
                                name="amount"
                                id="amount"
                                placeholder="30"
                                required
                                class="w-full px-3 py-1.5 border border-gray-300 rounded-md text-sm"
                        />
                    </div>
                    <div>
                        <button
                                type="submit"
                                class="px-3 py-1.5 rounded-md bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition"
                        >
                            등록
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div class="space-y-2 mt-6" id="proteinList">
            <!-- 일반 아이템 -->
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-gray-50 border">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center gap-2">
                        <p class="text-sm font-medium text-gray-800 truncate">단백질쉐이크</p>
                        <span class="text-xs text-gray-500 whitespace-nowrap">25g</span>
                    </div>
                    <div class="flex gap-2 text-lg text-gray-700">
                        <button title="수정" class="hover:opacity-70">✏️</button>
                        <button title="삭제" class="hover:opacity-70">🗑️</button>
                    </div>
                </div>
            </div>

            <!-- 수정중인 아이템 (슬림화) -->
            <div class="flex items-center justify-between px-4 py-2 rounded-md bg-white border">
                <div class="flex items-center gap-2 w-full pr-2">
                    <input
                            type="text"
                            value="닭가슴살"
                            class="w-1/2 text-sm px-2 py-1 border rounded"
                            placeholder="이름"
                    />
                    <input
                            type="number"
                            value="30"
                            class="w-1/3 text-sm px-2 py-1 border rounded"
                            placeholder="섭취량"
                    />
                </div>
                <div class="flex gap-2 text-lg">
                    <button title="확인" class="hover:opacity-80">✅</button>
                    <button title="취소" class="hover:opacity-80">❌</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 고정 하단 네비게이션 (카드 내부 포함, 스크롤 제외) -->
    <nav class="absolute bottom-0 left-0 w-full bg-white border-t flex justify-around text-sm text-gray-400 py-3 rounded-b-[40px]">
        <a href="#" class="text-center text-black">
            <div>🏠<br />Home</div>
        </a>
        <a href="/templates/history.html" class="text-center">
            <div>📄<br />History</div>
        </a>
        <a href="/templates/analysis.html" class="text-center">
            <div>📊<br />Analysis</div>
        </a>
        <a href="/templates/profile.html" class="text-center">
            <div>👤<br />Profile</div>
        </a>
    </nav>
</div>

<script>
    const goal = 120;
    const current = 10;

    function updateProgress(currentValue) {
        const percent = Math.min((currentValue / goal) * 100, 100);
        const circleLength = 2 * Math.PI * 45;
        const offset = circleLength * (1 - percent / 100);

        const circle = document.getElementById("progressCircle");
        if (circle) {
            circle.style.strokeDashoffset = offset;
        }

        document.getElementById("currentText").innerText = `${currentValue}g`;
        document.getElementById("remainText").innerText = `${goal - currentValue}g 남았어요!`;
    }

    window.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
            updateProgress(current);
        }, 100);
    });
</script>
</body>
</html>
